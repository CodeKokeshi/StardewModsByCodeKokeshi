1.4.0
=== MAJOR: Complete Follow System Rewrite ===
- FIXED: Pet stuttering and left-right flickering completely eliminated! Movement is now buttery smooth.
- FIXED: Pets no longer get stuck on tiny obstacles - BLINK wall-pass mode kicks in automatically.
- FIXED: Vanilla pet behavior no longer interferes with mod-controlled movement.
- FIXED: Pets won't randomly fall asleep or sit down while following you.
- FIXED: "Moonwalking" bug (moving while facing opposite direction) after picking up forageables.

=== BLINK Wall-Pass System (Stuck Recovery) ===
- NEW: When stuck for ~0.5 seconds, pets activate BLINK MODE with SUPER speed (30 px/frame)!
- NEW: Wall-pass works for BOTH following AND foraging - pets blink through walls to reach anything.
- NEW: In wall-pass mode, pets phase through ALL obstacles except water (fences, buildings, rocks, etc.).
- NEW: Direction is LOCKED during wall-pass to prevent wobbling/flickering while passing through walls.
- NEW: Wall-pass INSTANTLY accelerates (0.6 lerp) - looks like a teleport/blink, not gradual.
- NEW: Wall-pass auto-exits when: reaching target, timeout (~2 sec max), or forage disappears.
- NEW: Water tiles are ALWAYS blocked even in wall-pass mode (pets try to go around water).
- IMPROVED: Forage wall-pass marks unreachable items after timeout and moves to next target.

=== Moonwalking Fix ===
- NEW: Direction is synced to velocity when transitioning between states.
- NEW: SyncDirectionToTarget() called when switching from forage to follow.
- NEW: SyncDirectionToVelocity() called after wall-pass completion.
- FIXED: Pet now faces the correct direction after picking up forageables.
- FIXED: Pet faces player immediately when forage target disappears.

=== Idle Roaming (NEW!) ===
- NEW: When player is stationary and pet is close, pet will do small random movements!
- NEW: Pet "roams" within 0.75 tiles of current position for natural behavior.
- NEW: Roaming only triggers after player stationary for 1+ second.
- NEW: 2% chance per tick to start a roam (not constant movement).
- NEW: Roaming cancels immediately when player moves or pet needs to follow.
- NEW: 30-tick cooldown between roams to prevent hyperactive behavior.

=== Movement System Overhaul ===
- NEW: State machine with 4 states: Idle, FollowingPlayer, Foraging, WallPassing.
- NEW: Smooth velocity-based movement with Vector2.Lerp acceleration (0.2 factor).
- NEW: Smooth deceleration when stopping (0.3 lerp toward zero instead of instant stop).
- NEW: Direction locking with configurable threshold (0.4) - prevents flickering on diagonal movement.
- NEW: Double direction lock time during wall-pass for extra stability.
- IMPROVED: Obstacle avoidance tries angles: 25°, -25°, 45°, -45°, 70°, -70° before sliding.
- IMPROVED: Slide movement at 60% speed along walls when angled approaches fail.
- IMPROVED: Follow distances: stop at 1.25 tiles, start at 2.5 tiles (tighter follow).
- IMPROVED: Speed scaling: 2.2x sprint (8+ tiles), 1.8x (6+ tiles), 1.4x (4+ tiles), 1.1x (2.5+ tiles).

=== Foraging System ===
- CHANGED: Foraging takes ABSOLUTE priority - pet completely ignores player while collecting items.
- NEW: Forage stuck activates WALL-PASS (0.5 sec) instead of marking unreachable immediately.
- NEW: Unreachable forage tiles tracked and cleared every 10 seconds.
- IMPROVED: Forage scanning every 12 ticks (was 15) for more responsive pickup.
- IMPROVED: Immediately scans for next forageable after pickup (no delay).
- NEW: 10-tile leash - won't chase forageables too far from player.

=== Harmony Patches ===
- NEW: RunState_Prefix - completely suppresses vanilla pet AI when following/working.
- NEW: BehaviorOnFarmerLocationEntry_Prefix - prevents random sleep behavior while following.
- IMPROVED: Forces pet out of Sleep/SitDown behaviors when follow activates.
- IMPROVED: Clears vanilla PathFindController to prevent conflicts.

=== Edge Cases Handled ===
- Location changes: Properly warps pet and resets all state.
- Water navigation: Even in wall-pass, pets route around water tiles.
- Forage stuck: After 0.5 sec, activates wall-pass to reach it (or marks unreachable after 2 sec timeout).
- Wall-pass stuck: Times out after 2 seconds, gives normal movement another chance.
- State transitions: Full state reset when toggling follow mode.
- Animation: Proper animate calls, smooth stop animation on halt.
- Direction sync: Facing direction always matches movement direction after state changes.

=== Other Fixes ===
- FIXED: Pet command menu no longer hijacks normal interaction (hold LeftShift to open).
- IMPROVED: Overnight scavenging now happens regardless of pet state.
- NEW: Added i18n support (English default) for pet menu and HUD messages.

1.3.1
- Fixed bug where SMAPI console window would flash repeatedly after naming a new pet during the adoption cutscene.
- Pets now use vanilla interaction behavior during events, cutscenes, and when menus/dialogues are active to prevent conflicts.

1.3.0
=== Follow Mode - Now Fully Functional! ===
- MAJOR: Follow mode upgraded from experimental to fully functional!
- CHANGED: "Follow Outside Farm" is now enabled by default - pets will follow you everywhere!
- NEW: Pets now forage while following you! They automatically pick up forageable items (berries, mushrooms, spring onions, etc.) nearby and store them in their inventory.
- NEW: HUD notification appears whenever your pet picks up a forageable item showing what they found.
- NEW: "No work to do" notification when your pet can't find any debris, trees, or boulders to clear.
- IMPROVED: Stuck pet detection now uses ultra-fast speed to bypass obstacles instead of awkward teleporting.
- IMPROVED: Pets smoothly accelerate through walls when stuck, then slow back down once clear - no more jarring warps!
- IMPROVED: Message changed from "too far away" to "not on the same area" for clarity when pets are in different locations.
- Added "Forage While Following" config option (enabled by default) to toggle pet foraging behavior.
- Fast mode automatically deactivates when pet reaches player or makes good progress.

=== Whistle & Menu System ===
- Whistle keybind system! Press V (default, configurable) to open/close pet selection menu.
- NEW: Whistle Key is now configurable directly in Generic Mod Config Menu! No more editing config.json manually.
- Whistle menu features full-body pet sprites (like Animals page), scrolling for many pets, and clear status indicators.
- Menu shows pet name, current status (Idle/Working/Following), and disables pets already following or in different areas.
- Pet tracking arrows now display pet icons next to them (separated, larger scale, biased toward center).

=== Quality of Life ===
- Pets in follow mode are now passable - you can walk through them to get through doors easily.
- Pets automatically exit resting/sleeping state when you change locations while following.
- Trees at ALL growth stages (0-5) can now be removed by working pets, including seeds (stage 0).
- Small trees (stages 0-4) use appropriate twig effects instead of full tree chopping effects.
- Fixed stuck loop counter not accumulating properly after warps.
- Removed "(Experimental)" label from Follow Outside Farm option - the feature is now stable!

1.2.0
- Multi-pet support! Each pet now works independently (Pet Licenses compatible).
- Target reservation system prevents pets from targeting the same debris.
- Collision avoidance keeps pets from stacking on each other.
- Pets now pause and stop moving when you talk to them.
- After 3 failed warp attempts, pets destroy target remotely (fixes infinite stuck loops).
- Trees at all growth stages (1-5) can now be removed, not just fully grown ones.

1.1.0
- Added proper destruction visuals/FX/SFX when pets clear debris/wood/stone (no more silent disappearing).
- Adjusted wood-related destruction to use a consistent twig-style particle/poof effect.
- Fixed cases where pets could get stuck while doing work by adding a warp fallback near the target.
- Improved follow behavior with catch-up speed scaling and a stuck warp fallback near the player.
